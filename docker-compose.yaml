# version: "3.9" # default is latest

services:
  db:
    image: mariadb:latest
    # container_name: wp1_mariadb # optional: default is service name with dir prefix
    restart: unless-stopped     # optional: ensures the container restarts if it crashes or the server reboots
    environment:
      MARIADB_ROOT_PASSWORD: 000
      MARIADB_DATABASE: wp1_db
      MARIADB_USER: wp1_user
      MARIADB_PASSWORD: 111
    # ports:      # not needed as its connectiond by service name, but can be uncommented for external access
      # - "3306:3306"
    volumes:
      - wp1_db_data:/var/lib/mysql

  web:

    build: . #image name given in docker file
    #image: php:8.2-apache # stable version for wordpress, "wordpress:php8.2-apache" for official wordpress image with php and apache, but using php image and installing wordpress manually gives more control
    # container_name: wp1_web
    restart: unless-stopped 
    depends_on: # optional: first db then web, but not strictly needed as docker will handle the startup order
      - db 
    ports:
      - "8080:80"
    volumes:
      - wp1_data:/var/www/html

volumes:    #persistant storage for database and wordpress files
  wp1_db_data:
  wp1_data:
